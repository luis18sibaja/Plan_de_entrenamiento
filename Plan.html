<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan de Entrenamiento Interactivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: The SPA is designed as an interactive weekly dashboard. A top-level navigation allows the user to select a workout day (Día 1, 2, or 3). Selecting a day dynamically displays its specific routine, broken down into three clear, collapsible sections: Calentamiento, Circuito HIIT, and Enfriamiento. This task-oriented structure is better than a linear document as it focuses the user on a single day's workout, reducing cognitive load and improving usability for a recurring task. The interactive cards for each exercise provide on-demand detail, keeping the main view clean and scannable. -->
    <!-- Visualization & Content Choices: Report Info: Workout structure (3 phases) -> Goal: Show session composition -> Viz: Chart.js Donut Chart -> Interaction: Static, for at-a-glance info. Justification: Provides a quick visual summary of time commitment per phase. Report Info: Individual exercises -> Goal: Teach proper form -> Viz: HTML/CSS Cards with text and images -> Interaction: Click-to-expand/modal for detailed description and larger visual. Justification: Progressive disclosure prevents information overload. Report Info: HIIT Intervals (40s/20s) -> Goal: Guide user through the circuit -> Viz: Structured HTML list with clear time labels -> Interaction: None in this version, but designed for future timer integration. Justification: Clear, scannable instructions are paramount. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 300px;
            height: auto;
            margin: auto;
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .active-day {
            background-color: #27797d;
            color: white;
        }
        .inactive-day {
            background-color: #f0f4f8;
            color: #4a5568;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div id="app" class="max-w-6xl mx-auto p-4 md:p-8">

        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-teal-800">Plan de Entrenamiento: Fase 1</h1>
            <p class="text-lg text-stone-600 mt-2">HIIT Funcional y Adaptativo para Espondilitis Anquilosante</p>
        </header>

        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md shadow-md mb-8" role="alert">
            <p class="font-bold">⚠️ Advertencia Médica Esencial</p>
            <p class="text-sm">Este programa debe ser revisado y aprobado por tu médico reumatólogo y/o fisioterapeuta antes de comenzar. Escucha a tu cuerpo: el dolor agudo es una señal para detenerse.</p>
        </div>

        <nav class="flex justify-center gap-2 md:gap-4 mb-8">
            <button id="btn-day-1" class="day-btn text-sm md:text-base font-bold py-2 px-4 rounded-full shadow-lg transition-transform transform hover:scale-105">Día 1: Empuje y Core</button>
            <button id="btn-day-2" class="day-btn text-sm md:text-base font-bold py-2 px-4 rounded-full shadow-lg transition-transform transform hover:scale-105">Día 2: Tracción y Resistencia</button>
            <button id="btn-day-3" class="day-btn text-sm md:text-base font-bold py-2 px-4 rounded-full shadow-lg transition-transform transform hover:scale-105">Día 3: Full Body</button>
        </nav>

        <main id="workout-content">
        </main>

    </div>

    <div id="exercise-modal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 hidden modal-backdrop">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto modal-content transform scale-95">
            <div class="sticky top-0 bg-white p-4 border-b border-stone-200 flex justify-between items-center">
                <h3 id="modal-title" class="text-2xl font-bold text-teal-800"></h3>
                <button id="modal-close" class="text-stone-500 hover:text-stone-800 text-3xl">&times;</button>
            </div>
            <div class="p-6">
                <img id="modal-img" src="" alt="Demostración del ejercicio" class="w-full h-auto object-cover rounded-md mb-4 bg-stone-100" onerror="this.onerror=null;this.src='https://placehold.co/600x400/e2e8f0/4a5568?text=Imagen+no+disponible';">
                <p id="modal-desc" class="text-stone-700"></p>
            </div>
        </div>
    </div>


    <script>
        const exercisesData = {
            warmup: [
                { name: "Respiración Diafragmática", desc: "Tumbado boca arriba, inhala profundo por la nariz durante 4 segundos, sintiendo cómo se expande tu abdomen. Sostén 2 segundos y exhala lentamente por la boca durante 6 segundos. Repite por 5 minutos.", img: "https://i.ibb.co/64G0D6r/diaphragmatic-breathing.gif" },
                { name: "Gato-Vaca", reps: "15 reps", desc: "A gatas, con las manos debajo de los hombros y las rodillas debajo de las caderas. Inhala mientras arqueas la espalda (vaca) y exhala mientras la redondeas (gato). Muévete de forma lenta y controlada.", img: "https://i.ibb.co/pwnV5zW/cat-cow.gif" },
                { name: "Extensión de Espalda - Esfinge", reps: "5 reps de 30 seg", desc: "Tumbado boca abajo, apóyate sobre los antebrazos con los codos debajo de los hombros. Presiona suavemente para elevar el pecho, manteniendo la cadera en el suelo. Siente un estiramiento suave en la espalda baja.", img: "https://i.ibb.co/k2VjGvH/sphinx-pose.jpg" },
                { name: "Bird-Dog", reps: "8-12 reps x lado", desc: "A gatas, contrae el abdomen. Extiende un brazo hacia adelante y la pierna opuesta hacia atrás, formando una línea recta. Mantén la posición por 6 segundos sin dejar que la cadera rote. Vuelve y alterna.", img: "https://i.ibb.co/hK7dY2f/bird-dog.gif" },
            ],
            cooldown: [
                { name: "Estiramiento de Psoas", reps: "30-45 seg x lado", desc: "Ponte de rodillas y adelanta un pie, formando un ángulo de 90 grados. Empuja suavemente la cadera hacia adelante hasta sentir un estiramiento en la parte frontal de la cadera de la pierna trasera.", img: "https://i.ibb.co/2vX0d3b/psoas-stretch.jpg" },
                { name: "Estiramiento de Glúteos (Figura 4)", reps: "30-45 seg x lado", desc: "Tumbado boca arriba, cruza un tobillo sobre la rodilla opuesta. Sujeta el muslo de la pierna de apoyo y tira suavemente hacia tu pecho.", img: "https://i.ibb.co/qD4Y9c2/figure-four.gif" },
                { name: "Estiramiento de Pectorales", reps: "30-45 seg", desc: "En el marco de una puerta, coloca los antebrazos a cada lado con los codos a la altura de los hombros. Da un paso adelante hasta sentir un estiramiento en el pecho.", img: "https://i.ibb.co/9h7Vvdt/doorway-pectoral-stretch.jpg" },
                { name: "Colgarse de una Barra", reps: "30-45 seg", desc: "Si tienes una barra, simplemente cuélgate con los brazos extendidos. Deja que la gravedad estire tu espalda y hombros. Si no alcanzas, puedes mantener los pies en el suelo.", img: "https://i.ibb.co/K50257B/dead-hang.jpg" },
            ],
            day1: [
                { name: "Sentadilla (Squat)", desc: "De pie, con los pies al ancho de los hombros. Baja la cadera hacia atrás y abajo como si te sentaras en una silla. Mantén el pecho erguido y la espalda recta. Baja tan profundo como puedas sin dolor.", img: "https://i.ibb.co/6P0FpCH/bodyweight-squat.gif" },
                { name: "Flexiones Inclinadas", desc: "Apoya las manos en una superficie elevada como un banco o una mesa. Mantén el cuerpo en línea recta. Baja el pecho hacia la superficie y empuja para volver al inicio. A menor inclinación, mayor dificultad.", img: "https://i.ibb.co/LQrG2qW/incline-pushup.gif" },
                { name: "Plancha Frontal", desc: "Apóyate en los antebrazos y las puntas de los pies. Mantén el cuerpo en una línea recta perfecta desde la cabeza hasta los talones. Contrae fuertemente el abdomen y los glúteos.", img: "https://i.ibb.co/gVrjD33/plank.gif" },
                { name: "Remo con Toalla", desc: "Sentado en el suelo con las piernas estiradas, pasa una toalla por las plantas de los pies. Sujeta los extremos y tira hacia ti, juntando los omóplatos. Mantén la espalda recta.", img: "https://i.ibb.co/xL8XvYh/towel-row.gif" },
                { name: "Puente de Glúteos", desc: "Tumbado boca arriba con las rodillas flexionadas. Eleva la cadera hasta alinearla con rodillas y hombros. Contrae los glúteos en la parte más alta del movimiento.", img: "https://i.ibb.co/mH04QJj/glute-bridge.gif" },
            ],
            day2: [
                { name: "Zancadas Alternas", desc: "Da un paso largo hacia adelante y flexiona ambas rodillas hasta formar ángulos de 90 grados. La rodilla de atrás casi debe tocar el suelo. Empuja con la pierna delantera para volver al inicio y alterna.", img: "https://i.ibb.co/6y45sKq/lunges.gif" },
                { name: "Dominadas Australianas", desc: "Colócate debajo de una barra baja o el borde de una mesa resistente. Sujeta la barra con las manos y, manteniendo el cuerpo recto, tira de tu pecho hacia la barra. Controla la bajada.", img: "https://i.ibb.co/Wc6qP6K/australian-pullups.gif" },
                { name: "Escaladores (Mountain Climbers)", desc: "En posición de plancha alta (manos en el suelo), lleva las rodillas hacia el pecho de forma alterna y controlada. Mantén la cadera baja y el abdomen contraído.", img: "https://i.ibb.co/Tq8dK4w/mountain-climbers.gif" },
                { name: "Peso Muerto Rumano (sin peso)", desc: "De pie, con una ligera flexión de rodillas. Haz una bisagra desde la cadera, llevando los glúteos hacia atrás. Mantén la espalda completamente recta y baja hasta que sientas el estiramiento en los isquiotibiales.", img: "https://i.ibb.co/z5Y9603/romanian-deadlift.gif" },
                { name: "Plancha Lateral", desc: "Apóyate sobre un antebrazo y el lateral de tu pie. Eleva la cadera para formar una línea recta. Mantén 20 segundos por cada lado dentro del intervalo de 40 segundos.", img: "https://i.ibb.co/C9H0C6V/side-plank.gif" },
            ],
            day3: [
                { name: "Levantamiento Turco (parcial)", desc: "Tumbado boca arriba con una pierna flexionada, empuja con ese pie para rodar sobre el codo opuesto y luego sobre la mano. Eleva la cadera del suelo. Realiza el movimiento lento y controlado, sin peso.", img: "https://i.ibb.co/7V2Z5yG/turkish-getup-partial.gif" },
                { name: "Swing", desc: "Usa una pesa rusa, mancuerna o una mochila con peso. El movimiento es una bisagra de cadera explosiva. Empuja la cadera hacia atrás y luego extiéndela con fuerza para que el peso se eleve. El poder viene de la cadera, no de los brazos.", img: "https://i.ibb.co/k5Gf2z6/kettlebell-swing.gif" },
                { name: "Caminata del Granjero", desc: "Sostén un peso en cada mano (mancuernas, garrafas de agua). Camina una distancia corta manteniendo el pecho erguido, los hombros hacia atrás y el abdomen apretado. No te inclines.", img: "https://i.ibb.co/3cY0sF2/farmers-walk.gif" },
                { name: "Subidas al Cajón/Escalón", desc: "Sube a una superficie elevada (escalón, banco bajo) con una pierna, llevando la otra rodilla hacia arriba. Baja de forma controlada. Alterna la pierna que inicia el movimiento.", img: "https://i.ibb.co/mN71w2b/step-ups.gif" },
                { name: "Press Pallof", desc: "De pie, de lado a un anclaje con una banda elástica. Sujeta la banda con ambas manos frente a tu pecho. Da un paso lateral para crear tensión y extiende los brazos al frente, resistiendo el impulso de la banda de girarte.", img: "https://i.ibb.co/Yc53L2H/pallof-press.gif" },
            ]
        };

        const workoutContent = document.getElementById('workout-content');
        const modal = document.getElementById('exercise-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalImg = document.getElementById('modal-img');
        const modalDesc = document.getElementById('modal-desc');
        const modalClose = document.getElementById('modal-close');
        
        const dayButtons = document.querySelectorAll('.day-btn');

        function createExerciseCard(exercise) {
            const card = document.createElement('div');
            card.className = 'bg-white p-4 rounded-lg shadow-md flex items-center gap-4 cursor-pointer hover:shadow-xl hover:scale-105 transition-all duration-300';
            card.innerHTML = `
                <img src="${exercise.img}" alt="${exercise.name}" class="w-20 h-20 md:w-24 md:h-24 object-cover rounded-md bg-stone-100 flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/100x100/e2e8f0/4a5568?text=Imagen';">
                <div class="flex-grow">
                    <h4 class="font-bold text-lg text-teal-700">${exercise.name}</h4>
                    ${exercise.reps ? `<p class="text-stone-600 text-sm">${exercise.reps}</p>` : ''}
                </div>
                <span class="text-teal-500 font-bold">&rarr;</span>
            `;
            card.addEventListener('click', () => showModal(exercise));
            return card;
        }
        
        function showModal(exercise) {
            modalTitle.textContent = exercise.name;
            modalImg.src = exercise.img;
            modalImg.alt = `Demostración de ${exercise.name}`;
            modalDesc.textContent = exercise.desc;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            setTimeout(() => {
                modal.firstElementChild.classList.remove('scale-95');
            }, 10);
        }

        function hideModal() {
            modal.firstElementChild.classList.add('scale-95');
             setTimeout(() => {
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 300);
        }

        modalClose.addEventListener('click', hideModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                hideModal();
            }
        });

        function renderWorkout(day) {
            workoutContent.innerHTML = '';
            
            const dayData = exercisesData[day];
            
            const structure = [
                { title: 'A) Calentamiento y Movilidad', duration: 15, data: exercisesData.warmup, color: 'rgba(20, 83, 45, 0.7)' },
                { title: 'B) Circuito HIIT', duration: 20, data: dayData, color: 'rgba(56, 161, 105, 0.8)' },
                { title: 'C) Enfriamiento y Estiramientos', duration: 10, data: exercisesData.cooldown, color: 'rgba(49, 151, 149, 0.7)' }
            ];

            const grid = document.createElement('div');
            grid.className = 'grid grid-cols-1 lg:grid-cols-3 gap-8';

            const mainContent = document.createElement('div');
            mainContent.className = 'lg:col-span-2 space-y-8';
            
            structure.forEach(section => {
                const sectionEl = document.createElement('section');
                sectionEl.innerHTML = `<h3 class="text-2xl font-bold border-b-2 border-teal-500 pb-2 mb-4">${section.title}</h3>`;
                if(section.title.includes('HIIT')) {
                    sectionEl.innerHTML += `<p class="mb-4 p-3 bg-teal-50 rounded-md text-teal-800">Realiza cada ejercicio durante <strong>40 segundos</strong>, descansa <strong>20 segundos</strong>. Al final del circuito, descansa <strong>90 segundos</strong>. Repite 3-4 veces.</p>`;
                }
                const exercisesContainer = document.createElement('div');
                exercisesContainer.className = 'space-y-4';
                section.data.forEach(ex => exercisesContainer.appendChild(createExerciseCard(ex)));
                sectionEl.appendChild(exercisesContainer);
                mainContent.appendChild(sectionEl);
            });

            const sidebar = document.createElement('aside');
            sidebar.className = 'lg:col-span-1';
            const sidebarContent = document.createElement('div');
            sidebarContent.className = 'bg-white p-6 rounded-lg shadow-md sticky top-8';
            sidebarContent.innerHTML = `
                <h3 class="text-xl font-bold text-center mb-4">Estructura de la Sesión</h3>
                <div class="chart-container">
                    <canvas id="session-chart"></canvas>
                </div>
                <div id="chart-legend" class="mt-4 text-sm space-y-2"></div>
            `;
            sidebar.appendChild(sidebarContent);
            
            grid.appendChild(mainContent);
            grid.appendChild(sidebar);

            workoutContent.appendChild(grid);

            const ctx = document.getElementById('session-chart').getContext('2d');
            const legendContainer = document.getElementById('chart-legend');
            legendContainer.innerHTML = ''; 
            
            const chartData = {
                labels: structure.map(s => s.title.split(') ')[1]),
                datasets: [{
                    data: structure.map(s => s.duration),
                    backgroundColor: structure.map(s => s.color),
                    borderColor: '#ffffff',
                    borderWidth: 2,
                    hoverOffset: 4
                }]
            };

            new Chart(ctx, {
                type: 'doughnut',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw} min`;
                                }
                            }
                        }
                    }
                }
            });
            
            chartData.labels.forEach((label, index) => {
                const legendItem = document.createElement('div');
                legendItem.className = 'flex items-center';
                legendItem.innerHTML = `
                    <span class="w-4 h-4 rounded-full mr-2" style="background-color: ${chartData.datasets[0].backgroundColor[index]}"></span>
                    <span><strong>${label}:</strong> ${chartData.datasets[0].data[index]} min aprox.</span>
                `;
                legendContainer.appendChild(legendItem);
            });

        }
        
        function setActiveButton(activeBtn) {
            dayButtons.forEach(btn => {
                if (btn === activeBtn) {
                    btn.classList.add('active-day');
                    btn.classList.remove('inactive-day');
                } else {
                    btn.classList.add('inactive-day');
                    btn.classList.remove('active-day');
                }
            });
        }

        document.getElementById('btn-day-1').addEventListener('click', () => {
             renderWorkout('day1');
             setActiveButton(document.getElementById('btn-day-1'));
        });
        document.getElementById('btn-day-2').addEventListener('click', () => {
            renderWorkout('day2');
            setActiveButton(document.getElementById('btn-day-2'));
        });
        document.getElementById('btn-day-3').addEventListener('click', () => {
            renderWorkout('day3');
            setActiveButton(document.getElementById('btn-day-3'));
        });
        
        window.addEventListener('load', () => {
            document.getElementById('btn-day-1').click();
        });
        
    </script>

</body>
</html>
